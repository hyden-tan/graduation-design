# C ¿É±ä²ÎÊý Óë C ÃüÁîÐÐ²ÎÊý
## C ¿É±ä²ÎÊý
ÓÐÊ±£¬Äú¿ÉÄÜ»áÅöµ½ÕâÑùµÄÇé¿ö£¬ÄúÏ£Íûº¯Êý´øÓÐ¿É±äÊýÁ¿µÄ²ÎÊý£¬¶ø²»ÊÇÔ¤¶¨ÒåÊýÁ¿µÄ²ÎÊý¡£C ÓïÑÔÎªÕâÖÖÇé¿öÌá¹©ÁËÒ»¸ö½â¾ö·½°¸£¬ËüÔÊÐíÄú¶¨ÒåÒ»¸öº¯Êý£¬ÄÜ¸ù¾Ý¾ßÌåµÄÐèÇó½ÓÊÜ¿É±äÊýÁ¿µÄ²ÎÊý¡£ÏÂÃæµÄÊµÀýÑÝÊ¾ÁËÕâÖÖº¯ÊýµÄ¶¨Òå¡£

    int func(int, ... ) 
    {
       .
       .
       .
    }
    
    int main()
    {
       func(2, 2, 3);
       func(3, 2, 3, 4);
    }

Çë×¢Òâ£¬º¯Êý func() ×îºóÒ»¸ö²ÎÊýÐ´³ÉÊ¡ÂÔºÅ£¬¼´Èý¸öµãºÅ£¨...£©£¬Ê¡ÂÔºÅÖ®Ç°µÄÄÇ¸ö²ÎÊýÊÇ int£¬´ú±íÁËÒª´«µÝµÄ¿É±ä²ÎÊýµÄ×ÜÊý¡£ÎªÁËÊ¹ÓÃÕâ¸ö¹¦ÄÜ£¬ÄúÐèÒªÊ¹ÓÃ stdarg.h Í·ÎÄ¼þ£¬¸ÃÎÄ¼þÌá¹©ÁËÊµÏÖ¿É±ä²ÎÊý¹¦ÄÜµÄº¯ÊýºÍºê¡£¾ßÌå²½ÖèÈçÏÂ£º

- ¶¨ÒåÒ»¸öº¯Êý£¬×îºóÒ»¸ö²ÎÊýÎªÊ¡ÂÔºÅ£¬Ê¡ÂÔºÅÇ°Ãæ¿ÉÒÔÉèÖÃ×Ô¶¨Òå²ÎÊý¡£
- ÔÚº¯Êý¶¨ÒåÖÐ´´½¨Ò»¸ö va_list ÀàÐÍ±äÁ¿£¬¸ÃÀàÐÍÊÇÔÚ stdarg.h Í·ÎÄ¼þÖÐ¶¨ÒåµÄ¡£
- Ê¹ÓÃ int ²ÎÊýºÍ va_start ºêÀ´³õÊ¼»¯ va_list ±äÁ¿ÎªÒ»¸ö²ÎÊýÁÐ±í¡£ºê va_start ÊÇÔÚ stdarg.h Í·ÎÄ¼þÖÐ¶¨ÒåµÄ¡£
- Ê¹ÓÃ va_arg ºêºÍ va_list ±äÁ¿À´·ÃÎÊ²ÎÊýÁÐ±íÖÐµÄÃ¿¸öÏî¡£
- Ê¹ÓÃºê va_end À´ÇåÀí¸³Óè va_list ±äÁ¿µÄÄÚ´æ¡£

ÏÖÔÚÈÃÎÒÃÇ°´ÕÕÉÏÃæµÄ²½Öè£¬À´±àÐ´Ò»¸ö´øÓÐ¿É±äÊýÁ¿²ÎÊýµÄº¯Êý£¬²¢·µ»ØËüÃÇµÄÆ½¾ùÖµ£º

    #include &lt;stdio.h>
    #include &lt;stdarg.h>
    
    double average(int num,...)
    {
    
        va_list valist;
        double sum = 0.0;
        int i;
    
        /* Îª num ¸ö²ÎÊý³õÊ¼»¯ valist */
        va_start(valist, num);
    
        /* ·ÃÎÊËùÓÐ¸³¸ø valist µÄ²ÎÊý */
        for (i = 0; i < num; i++)
        {
           sum += va_arg(valist, int);
        }
        /* ÇåÀíÎª valist ±£ÁôµÄÄÚ´æ */
        va_end(valist);
    
        return sum/num;
    }
    
    int main()
    {
       printf("Average of 2, 3, 4, 5 = %f\n", average(4, 2,3,4,5));
       printf("Average of 5, 10, 15 = %f\n", average(3, 5,10,15));
    }

ÉÏÃæµÄ´úÂë±»±àÒëºÍÖ´ÐÐÊ±£¬Ëü»á²úÉúÏÂÁÐ½á¹û¡£Ó¦¸ÃÖ¸³öµÄÊÇ£¬º¯Êý average() ±»µ÷ÓÃÁ½´Î£¬Ã¿´ÎµÚÒ»¸ö²ÎÊý¶¼ÊÇ±íÊ¾±»´«µÄ¿É±ä²ÎÊýµÄ×ÜÊý¡£Ê¡ÂÔºÅ±»ÓÃÀ´´«µÝ¿É±äÊýÁ¿µÄ²ÎÊý¡£

    Average of 2, 3, 4, 5 = 3.500000
    Average of 5, 10, 15 = 10.000000

## C ÃüÁîÐÐ²ÎÊý
Ö´ÐÐ³ÌÐòÊ±£¬¿ÉÒÔ´ÓÃüÁîÐÐ´«Öµ¸ø C ³ÌÐò¡£ÕâÐ©Öµ±»³ÆÎªÃüÁîÐÐ²ÎÊý£¬ËüÃÇ¶Ô³ÌÐòºÜÖØÒª£¬ÌØ±ðÊÇµ±ÄúÏë´ÓÍâ²¿¿ØÖÆ³ÌÐò£¬¶ø²»ÊÇÔÚ´úÂëÄÚ¶ÔÕâÐ©Öµ½øÐÐÓ²±àÂëÊ±£¬¾ÍÏÔµÃÓÈÎªÖØÒªÁË¡£
ÃüÁîÐÐ²ÎÊýÊÇÊ¹ÓÃ main() º¯Êý²ÎÊýÀ´´¦ÀíµÄ£¬ÆäÖÐ£¬argc ÊÇÖ¸´«Èë²ÎÊýµÄ¸öÊý£¬argv[] ÊÇÒ»¸öÖ¸ÕëÊý×é£¬Ö¸Ïò´«µÝ¸ø³ÌÐòµÄÃ¿¸ö²ÎÊý¡£ÏÂÃæÊÇÒ»¸ö¼òµ¥µÄÊµÀý£¬¼ì²éÃüÁîÐÐÊÇ·ñÓÐÌá¹©²ÎÊý£¬²¢¸ù¾Ý²ÎÊýÖ´ÐÐÏàÓ¦µÄ¶¯×÷£º

    #include &lt;stdio.h>
    
    int main( int argc, char *argv[] )  
    {
       if( argc == 2 )
       {
          printf("The argument supplied is %s\n", argv[1]);
       }
       else if( argc > 2 )
       {
          printf("Too many arguments supplied.\n");
       }
       else
       {
          printf("One argument expected.\n");
       }
    }

Ê¹ÓÃÒ»¸ö²ÎÊý£¬±àÒë²¢Ö´ÐÐÉÏÃæµÄ´úÂë£¬Ëü»á²úÉúÏÂÁÐ½á¹û£º

    The argument supplied is testing

Ê¹ÓÃÁ½¸ö²ÎÊý£¬±àÒë²¢Ö´ÐÐÉÏÃæµÄ´úÂë£¬Ëü»á²úÉúÏÂÁÐ½á¹û£º

    Too many arguments supplied.

²»´«ÈÎºÎ²ÎÊý£¬±àÒë²¢Ö´ÐÐÉÏÃæµÄ´úÂë£¬Ëü»á²úÉúÏÂÁÐ½á¹û£º

    One argument expected

Ó¦µ±Ö¸³öµÄÊÇ£¬`argv[0]` ´æ´¢³ÌÐòµÄÃû³Æ£¬`argv[1] `ÊÇÒ»¸öÖ¸ÏòµÚÒ»¸öÃüÁîÐÐ²ÎÊýµÄÖ¸Õë£¬`*argv[n] `ÊÇ×îºóÒ»¸ö²ÎÊý¡£Èç¹ûÃ»ÓÐÌá¹©ÈÎºÎ²ÎÊý£¬`argc` ½«Îª 1£¬·ñÔò£¬Èç¹û´«µÝÁËÒ»¸ö²ÎÊý£¬`argc` ½«±»ÉèÖÃÎª 2¡£
¶à¸öÃüÁîÐÐ²ÎÊýÖ®¼äÓÃ¿Õ¸ñ·Ö¸ô£¬µ«ÊÇÈç¹û²ÎÊý±¾Éí´øÓÐ¿Õ¸ñ£¬ÄÇÃ´´«µÝ²ÎÊýµÄÊ±ºòÓ¦°Ñ²ÎÊý·ÅÖÃÔÚË«ÒýºÅ "" »òµ¥ÒýºÅ '' ÄÚ²¿¡£ÈÃÎÒÃÇÖØÐÂ±àÐ´ÉÏÃæµÄÊµÀý£¬ÓÐÒ»¸ö¿Õ¼ä£¬ÄÇÃ´Äã¿ÉÒÔÍ¨¹ýÕâÑùµÄ¹Ûµã£¬°ÑËüÃÇ·ÅÔÚË«ÒýºÅ»òµ¥ÒýºÅ""""¡£ÈÃÎÒÃÇÖØÐÂ±àÐ´ÉÏÃæµÄÊµÀý£¬Ïò³ÌÐò´«µÝÒ»¸ö·ÅÖÃÔÚË«ÒýºÅÄÚ²¿µÄÃüÁîÐÐ²ÎÊý£º

    #include &lt;stdio.h>
    
    int main( int argc, char *argv[] )  
    {
       printf("Program name %s\n", argv[0]);
     
       if( argc == 2 )
       {
          printf("The argument supplied is %s\n", argv[1]);
       }
       else if( argc > 2 )
       {
          printf("Too many arguments supplied.\n");
       }
       else
       {
          printf("One argument expected.\n");
       }
    }

Ê¹ÓÃÒ»¸öÓÃ¿Õ¸ñ·Ö¸ôµÄ¼òµ¥²ÎÊý£¬²ÎÊýÀ¨ÔÚË«ÒýºÅÖÐ£¬±àÒë²¢Ö´ÐÐÉÏÃæµÄ´úÂë£¬Ëü»á²úÉúÏÂÁÐ½á¹û£º

    Progranm name ./a.out
    The argument supplied is testing1 testing2




